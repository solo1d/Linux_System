# 优化程序性能

## 性能提高技术

* **高级设计** :  **`为遇到的问题选择适当的算法和数据结构`**. 要特别警觉,避免使用那些会渐进的产生糟糕性能的算法和编码技术.
* **基本编码原则**: **`避免限制优化的因素.`**  这样编译器就能产生高效的代码.
  * 消除连续的函数调用.
  * 消除不必要的内存引用.
* **低级优化 :** **`结构化代码以利用硬件功能.`**
  * 展开循环, 降低开销, 并且使得进一步的优化成为可能.
  * 通过使用例如多个累积变量和重新结合等技术,找到方法提高指令级并行.
  * 用功能性风格重写条件操作, 使得编译采用条件数据传送.

## 程序剖析

**这是个程序分析的工具. linux 命令   `gprof`**  , **MAC OS 使用 `gprof2dot` , 用** brew install gprof2dot 来安装.

* **程序必须为剖析程序 进行编译和连接**
  * **也就是需要在用GCC编译的时候加上 `-pg   -Og`  这两个参数.\(运行会很慢\)**
    * **`-pg`  是确保编译器不通过内联替换来尝试执行任何优化**
    * **`-Og`  能保证正确的跟踪函数调用.**
* **编译出来的程序在运行时也可以指定命令行参数.\(不影响程序正常使用\)**
  * **`linx> ./a.out  正常执行的参数`**
    * 当程序执行后 **`a.out`**,会产生一个文件 **`gmon.out` \(MAC OS不会生成\)**
* **调用  gprof   来分析 gmon.out  中的数据.**
  * **`linux>  gprof  a.out`**



